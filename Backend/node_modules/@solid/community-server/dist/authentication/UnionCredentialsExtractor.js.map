{"version":3,"file":"UnionCredentialsExtractor.js","sourceRoot":"","sources":["../../src/authentication/UnionCredentialsExtractor.ts"],"names":[],"mappings":";;;AAAA,gEAA6D;AAI7D;;;;GAIG;AACH,MAAa,yBAA0B,SAAQ,2BAAkC;IAC/E,YAAmB,UAAkC;QACnD,KAAK,CAAC,UAAU,CAAC,CAAC;IACpB,CAAC;IAEM,KAAK,CAAC,OAAO,CAAC,OAAsB;QACzC,+CAA+C;QAC/C,MAAM,WAAW,GAAgB,EAAE,CAAC;QACpC,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE,CAAC;YAC7B,KAAK,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAA0B,EAAE,CAAC;gBAC/D,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;YAC/C,CAAC;QACH,CAAC;QACD,OAAO,WAAW,CAAC;IACrB,CAAC;IAED;;OAEG;IACK,QAAQ,CAA8B,WAAwB,EAAE,GAAM,EAAE,KAAsB;QACpG,IAAI,KAAK,EAAE,CAAC;YACV,WAAW,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;QAC3B,CAAC;IACH,CAAC;CACF;AAxBD,8DAwBC","sourcesContent":["import { UnionHandler } from '../util/handlers/UnionHandler';\nimport type { Credentials } from './Credentials';\nimport type { CredentialsExtractor } from './CredentialsExtractor';\n\n/**\n * Combines the results of several CredentialsExtractors into one.\n * If multiple of these extractors return a value for the same key,\n * the last result will be used.\n */\nexport class UnionCredentialsExtractor extends UnionHandler<CredentialsExtractor> {\n  public constructor(extractors: CredentialsExtractor[]) {\n    super(extractors);\n  }\n\n  public async combine(results: Credentials[]): Promise<Credentials> {\n    // Combine all the results into a single object\n    const credentials: Credentials = {};\n    for (const result of results) {\n      for (const key of Object.keys(result) as (keyof Credentials)[]) {\n        this.setValue(credentials, key, result[key]);\n      }\n    }\n    return credentials;\n  }\n\n  /**\n   * Helper function that makes sure the typings are correct.\n   */\n  private setValue<T extends keyof Credentials>(credentials: Credentials, key: T, value?: Credentials[T]): void {\n    if (value) {\n      credentials[key] = value;\n    }\n  }\n}\n"]}