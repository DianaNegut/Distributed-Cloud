{"version":3,"file":"AllStaticReader.js","sourceRoot":"","sources":["../../src/authorization/AllStaticReader.ts"],"names":[],"mappings":";;;AAAA,6DAA0D;AAE1D,yDAAsD;AAGtD;;;GAGG;AACH,MAAa,eAAgB,SAAQ,mCAAgB;IAClC,aAAa,CAAgB;IAE9C,YAAmB,KAAc;QAC/B,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC;YACjC,IAAI,EAAE,KAAK;YACX,KAAK,EAAE,KAAK;YACZ,MAAM,EAAE,KAAK;YACb,MAAM,EAAE,KAAK;YACb,MAAM,EAAE,KAAK;SACd,CAAC,CAAC;IACL,CAAC;IAEM,KAAK,CAAC,MAAM,CAAC,EAAE,cAAc,EAAyB;QAC3D,MAAM,oBAAoB,GAAG,IAAI,6BAAa,EAAiB,CAAC;QAChE,KAAK,MAAM,CAAE,UAAU,CAAE,IAAI,cAAc,EAAE,CAAC;YAC5C,oBAAoB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAC3D,CAAC;QACD,OAAO,oBAAoB,CAAC;IAC9B,CAAC;CACF;AArBD,0CAqBC","sourcesContent":["import { IdentifierMap } from '../util/map/IdentifierMap';\nimport type { PermissionReaderInput } from './PermissionReader';\nimport { PermissionReader } from './PermissionReader';\nimport type { PermissionMap, PermissionSet } from './permissions/Permissions';\n\n/**\n * PermissionReader which sets all permissions to true or false\n * independently of the identifier and requested permissions.\n */\nexport class AllStaticReader extends PermissionReader {\n  private readonly permissionSet: PermissionSet;\n\n  public constructor(allow: boolean) {\n    super();\n    this.permissionSet = Object.freeze({\n      read: allow,\n      write: allow,\n      append: allow,\n      create: allow,\n      delete: allow,\n    });\n  }\n\n  public async handle({ requestedModes }: PermissionReaderInput): Promise<PermissionMap> {\n    const availablePermissions = new IdentifierMap<PermissionSet>();\n    for (const [ identifier ] of requestedModes) {\n      availablePermissions.set(identifier, this.permissionSet);\n    }\n    return availablePermissions;\n  }\n}\n"]}