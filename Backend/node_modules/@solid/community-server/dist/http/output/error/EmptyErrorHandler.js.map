{"version":3,"file":"EmptyErrorHandler.js","sourceRoot":"","sources":["../../../../src/http/output/error/EmptyErrorHandler.ts"],"names":[],"mappings":";;;AAAA,0FAAuF;AACvF,6DAAyD;AACzD,yEAAsE;AAEtE,iDAA8C;AAE9C;;;;;;;;;;;;;;;GAeG;AACH,MAAa,iBAAkB,SAAQ,2BAAY;IAC9B,WAAW,CAAW;IACtB,MAAM,CAAU;IAEnC,YAAmB,WAAW,GAAG,CAAE,GAAG,CAAE,EAAE,MAAM,GAAG,KAAK;QACtD,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;IAEM,KAAK,CAAC,SAAS,CAAC,EAAE,KAAK,EAAoB;QAChD,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,KAAK,CAAC,UAAU,CAAC;YAC5D,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,0BAAW,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,KAAK,KAAK,MAAM,EAAE,CAAC;YACpE,OAAO;QACT,CAAC;QACD,MAAM,IAAI,iDAAuB,EAAE,CAAC;IACtC,CAAC;IAEM,KAAK,CAAC,MAAM,CAAC,EAAE,KAAK,EAAoB;QAC7C,OAAO,IAAI,yCAAmB,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC;IACnE,CAAC;CACF;AArBD,8CAqBC","sourcesContent":["import { NotImplementedHttpError } from '../../../util/errors/NotImplementedHttpError';\nimport { SOLID_ERROR } from '../../../util/Vocabularies';\nimport { ResponseDescription } from '../response/ResponseDescription';\nimport type { ErrorHandlerArgs } from './ErrorHandler';\nimport { ErrorHandler } from './ErrorHandler';\n\n/**\n * An {@link ErrorHandler} that returns an error response without adding a body.\n * For certain status codes, such as 304, it is important to not change anything\n * in the headers, such as content-type.\n *\n * The `statusCodes` array contains the status codes of error types for which\n * a body should never be added.\n *\n * The `always` boolean can be set to `true` to indicate that all errors should\n * be handled here.\n *\n * For errors with different status codes, a metadata field can be added\n * to indicate that this specific error response should not receive a body.\n * The predicate should be `urn:npm:solid:community-server:error:emptyBody`\n * and the value `true`.\n */\nexport class EmptyErrorHandler extends ErrorHandler {\n  protected readonly statusCodes: number[];\n  protected readonly always: boolean;\n\n  public constructor(statusCodes = [ 304 ], always = false) {\n    super();\n    this.statusCodes = statusCodes;\n    this.always = always;\n  }\n\n  public async canHandle({ error }: ErrorHandlerArgs): Promise<void> {\n    if (this.always || this.statusCodes.includes(error.statusCode) ||\n      error.metadata.get(SOLID_ERROR.terms.emptyBody)?.value === 'true') {\n      return;\n    }\n    throw new NotImplementedHttpError();\n  }\n\n  public async handle({ error }: ErrorHandlerArgs): Promise<ResponseDescription> {\n    return new ResponseDescription(error.statusCode, error.metadata);\n  }\n}\n"]}