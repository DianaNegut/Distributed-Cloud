{"version":3,"file":"AccountUtil.js","sourceRoot":"","sources":["../../../../../src/identity/interaction/account/util/AccountUtil.ts"],"names":[],"mappings":";;AAUA,0CAIC;AAUD,8BAQC;AASD,0CAIC;AA7CD,yDAA2D;AAC3D,qFAAkF;AAClF,iFAA8E;AAG9E,MAAM,MAAM,GAAG,IAAA,sBAAY,EAAC,aAAa,CAAC,CAAC;AAE3C;;GAEG;AACH,SAAgB,eAAe,CAAC,SAAkB;IAChD,IAAI,CAAC,SAAS,EAAE,CAAC;QACf,MAAM,IAAI,qCAAiB,EAAE,CAAC;IAChC,CAAC;AACH,CAAC;AAED;;;;;;;GAOG;AACH,SAAgB,SAAS,CAAqC,KAAQ,EAAE,IAAY;IAElF,MAAM,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,IAAI,CAA2C,CAAC;IAC9E,IAAI,CAAC,KAAK,EAAE,CAAC;QACX,MAAM,CAAC,KAAK,CAAC,wBAAwB,IAAI,mDAAmD,CAAC,CAAC;QAC9F,MAAM,IAAI,yCAAmB,CAAC,wBAAwB,IAAI,mDAAmD,CAAC,CAAC;IACjH,CAAC;IACD,OAAO,KAAK,CAAC;AACf,CAAC;AAED;;;;;;GAMG;AACH,SAAgB,eAAe,CAAC,KAAc,EAAE,QAAiB;IAC/D,IAAI,KAAK,KAAK,QAAQ,EAAE,CAAC;QACvB,MAAM,IAAI,qCAAiB,EAAE,CAAC;IAChC,CAAC;AACH,CAAC","sourcesContent":["import { getLoggerFor } from '../../../../logging/LogUtil';\nimport { InternalServerError } from '../../../../util/errors/InternalServerError';\nimport { NotFoundHttpError } from '../../../../util/errors/NotFoundHttpError';\nimport type { InteractionRoute } from '../../routing/InteractionRoute';\n\nconst logger = getLoggerFor('AccountUtil');\n\n/**\n * Asserts that the ID is defined. Throws a 404 otherwise.\n */\nexport function assertAccountId(accountId?: string): asserts accountId is string {\n  if (!accountId) {\n    throw new NotFoundHttpError();\n  }\n}\n\n/**\n * Parses the given path with the given {@link InteractionRoute}.\n * This assumes this call will succeed and thus expects the path to have the correct format.\n * If not, a 500 error will be thrown.\n *\n * @param route - Route to parse with.\n * @param path - Path to parse.\n */\nexport function parsePath<T extends InteractionRoute<string>>(route: T, path: string):\nNonNullable<ReturnType<T['matchPath']>> {\n  const match = route.matchPath(path) as ReturnType<T['matchPath']> | undefined;\n  if (!match) {\n    logger.error(`Unable to parse path ${path}. This usually implies a server misconfiguration.`);\n    throw new InternalServerError(`Unable to parse path ${path}. This usually implies a server misconfiguration.`);\n  }\n  return match;\n}\n\n/**\n * Asserts that the two given IDs are identical.\n * To be used when a request tries to access a resource to ensure they're not accessing someone else's data.\n *\n * @param input - Input ID.\n * @param expected - Expected ID.\n */\nexport function verifyAccountId(input?: string, expected?: string): asserts expected is string {\n  if (input !== expected) {\n    throw new NotFoundHttpError();\n  }\n}\n"]}