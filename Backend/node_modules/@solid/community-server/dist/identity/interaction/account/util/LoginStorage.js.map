{"version":3,"file":"LoginStorage.js","sourceRoot":"","sources":["../../../../../src/identity/interaction/account/util/LoginStorage.ts"],"names":[],"mappings":";;;AAOa,QAAA,YAAY,GAAG,SAAS,CAAC","sourcesContent":["import type {\n  IndexedStorage,\n  IndexTypeCollection,\n  StringKey,\n  ValueTypeDescription,\n} from '../../../../storage/keyvalue/IndexedStorage';\n\nexport const ACCOUNT_TYPE = 'account';\n\n/**\n * A {@link IndexedStorage} where the `defineType` function\n * takes an extra parameter to indicate if the type corresponds to a login method.\n * This is useful for storages that want to add extra requirements based on the data being edited.\n *\n * In practice, we use this because we want to require accounts to have at least 1 login method.\n */\nexport interface LoginStorage<T extends IndexTypeCollection<T>> extends Omit<IndexedStorage<T>, 'defineType'> {\n  /**\n   * Defines a type in the storage, just like in an {@link IndexedStorage},\n   * but additionally it needs to be indicated if the type corresponds to a login method or not.\n   *\n   * @param type - Type to define.\n   * @param description - Description of the type.\n   * @param isLogin - Whether this type corresponds to a login method or not.\n   */\n  defineType: <TType extends StringKey<T>>(type: TType, description: T[TType], isLogin: boolean) => Promise<void>;\n}\n\n/**\n * A {@link LoginStorage} with specific typings to ensure other types can reference account IDs\n * without actually needing to specify it explicitly in their storage type.\n */\nexport type AccountLoginStorage<T extends\nRecord<string, Record<string, ValueTypeDescription<keyof T | typeof ACCOUNT_TYPE>>>> =\n  LoginStorage<T & { [ACCOUNT_TYPE]: unknown }>;\n"]}