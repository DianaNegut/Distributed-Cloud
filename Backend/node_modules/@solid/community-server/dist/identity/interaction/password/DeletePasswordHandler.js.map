{"version":3,"file":"DeletePasswordHandler.js","sourceRoot":"","sources":["../../../../src/identity/interaction/password/DeletePasswordHandler.ts"],"names":[],"mappings":";;;AACA,6DAAyE;AAGzE,sEAAmE;AAInE;;GAEG;AACH,MAAa,qBAAsB,SAAQ,+CAAmC;IAC3D,aAAa,CAAgB;IAC7B,aAAa,CAAkB;IAEhD,YAAmB,aAA4B,EAAE,aAA8B;QAC7E,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;IACrC,CAAC;IAEM,KAAK,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,SAAS,EAA+B;QACpE,MAAM,KAAK,GAAG,IAAA,uBAAS,EAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;QAEzD,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QAC7D,IAAA,6BAAe,EAAC,SAAS,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;QAE7C,MAAM,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;QAElD,OAAO,EAAE,IAAI,EAAE,EAAE,EAAC,CAAC;IACrB,CAAC;CACF;AApBD,sDAoBC","sourcesContent":["import type { EmptyObject } from '../../../util/map/MapUtil';\nimport { parsePath, verifyAccountId } from '../account/util/AccountUtil';\nimport type { JsonRepresentation } from '../InteractionUtil';\nimport type { JsonInteractionHandlerInput } from '../JsonInteractionHandler';\nimport { JsonInteractionHandler } from '../JsonInteractionHandler';\nimport type { PasswordIdRoute } from './util/PasswordIdRoute';\nimport type { PasswordStore } from './util/PasswordStore';\n\n/**\n * Handles the deletion of a password login method.\n */\nexport class DeletePasswordHandler extends JsonInteractionHandler<EmptyObject> {\n  private readonly passwordStore: PasswordStore;\n  private readonly passwordRoute: PasswordIdRoute;\n\n  public constructor(passwordStore: PasswordStore, passwordRoute: PasswordIdRoute) {\n    super();\n    this.passwordStore = passwordStore;\n    this.passwordRoute = passwordRoute;\n  }\n\n  public async handle({ target, accountId }: JsonInteractionHandlerInput): Promise<JsonRepresentation<EmptyObject>> {\n    const match = parsePath(this.passwordRoute, target.path);\n\n    const login = await this.passwordStore.get(match.passwordId);\n    verifyAccountId(accountId, login?.accountId);\n\n    await this.passwordStore.delete(match.passwordId);\n\n    return { json: {}};\n  }\n}\n"]}