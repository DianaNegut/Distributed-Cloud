{"version":3,"file":"BaseEmailSender.js","sourceRoot":"","sources":["../../../../../src/identity/interaction/password/util/BaseEmailSender.ts"],"names":[],"mappings":";;;AAAA,2CAA6C;AAE7C,yDAA2D;AAC3D,+CAA4C;AAe5C;;GAEG;AACH,MAAa,eAAgB,SAAQ,yBAAW;IAC7B,MAAM,GAAG,IAAA,sBAAY,EAAC,IAAI,CAAC,CAAC;IAE5B,eAAe,CAAO;IACtB,UAAU,CAAS;IAEpC,YAAmB,IAAqB;QACtC,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,eAAe,GAAG,IAAA,4BAAe,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACzD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,IAAI,OAAO,CAAC;IAC/C,CAAC;IAEM,KAAK,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAa;QAC/D,MAAM,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC;YAClC,IAAI,EAAE,IAAI,CAAC,UAAU;YACrB,EAAE,EAAE,SAAS;YACb,OAAO;YACP,IAAI;YACJ,IAAI;SACL,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,4BAA4B,SAAS,EAAE,CAAC,CAAC;IAC7D,CAAC;CACF;AAtBD,0CAsBC","sourcesContent":["import { createTransport } from 'nodemailer';\nimport type Mail from 'nodemailer/lib/mailer';\nimport { getLoggerFor } from '../../../../logging/LogUtil';\nimport { EmailSender } from './EmailSender';\nimport type { EmailArgs } from './EmailSender';\n\nexport interface EmailSenderArgs {\n  emailConfig: {\n    host: string;\n    port: number;\n    auth: {\n      user: string;\n      pass: string;\n    };\n  };\n  senderName?: string;\n}\n\n/**\n * Sends e-mails using nodemailer.\n */\nexport class BaseEmailSender extends EmailSender {\n  private readonly logger = getLoggerFor(this);\n\n  private readonly mailTransporter: Mail;\n  private readonly senderName: string;\n\n  public constructor(args: EmailSenderArgs) {\n    super();\n    this.mailTransporter = createTransport(args.emailConfig);\n    this.senderName = args.senderName ?? 'Solid';\n  }\n\n  public async handle({ recipient, subject, text, html }: EmailArgs): Promise<void> {\n    await this.mailTransporter.sendMail({\n      from: this.senderName,\n      to: recipient,\n      subject,\n      text,\n      html,\n    });\n    this.logger.debug(`Sending recovery mail to ${recipient}`);\n  }\n}\n"]}