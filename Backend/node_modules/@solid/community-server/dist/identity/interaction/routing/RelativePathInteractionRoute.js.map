{"version":3,"file":"RelativePathInteractionRoute.js","sourceRoot":"","sources":["../../../../src/identity/interaction/routing/RelativePathInteractionRoute.ts"],"names":[],"mappings":";;;AAAA,kFAA+E;AAC/E,qDAA0F;AAG1F;;;;GAIG;AACH,MAAa,4BAA4B;IACtB,IAAI,CAA0B;IAC9B,YAAY,CAAS;IAEtC,YAAmB,IAA6B,EAAE,YAAoB,EAAE,WAAW,GAAG,IAAI;QACxF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,YAAY,GAAG,IAAA,6BAAkB,EAAC,YAAY,CAAC,CAAC;QACrD,IAAI,WAAW,EAAE,CAAC;YAChB,IAAI,CAAC,YAAY,GAAG,IAAA,8BAAmB,EAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAC7D,CAAC;IACH,CAAC;IAEM,OAAO,CAAC,UAAkC;QAC/C,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QAC3C,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;YACxB,MAAM,IAAI,yCAAmB,CAC3B,YAAY,IAAI,mFAAmF,CACpG,CAAC;QACJ,CAAC;QACD,OAAO,IAAA,kBAAO,EAAC,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;IAC1C,CAAC;IAEM,SAAS,CAAC,IAAY;QAC3B,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC;YACtC,OAAO;QACT,CAAC;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAEtD,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;CACF;AA/BD,oEA+BC","sourcesContent":["import { InternalServerError } from '../../../util/errors/InternalServerError';\nimport { ensureTrailingSlash, joinUrl, trimLeadingSlashes } from '../../../util/PathUtil';\nimport type { InteractionRoute } from './InteractionRoute';\n\n/**\n * A route that is relative to another route.\n * The relative path will be joined to the input base,\n * which can either be an absolute URL or an InteractionRoute of which the path will be used.\n */\nexport class RelativePathInteractionRoute<TBase extends string> implements InteractionRoute<TBase> {\n  private readonly base: InteractionRoute<TBase>;\n  private readonly relativePath: string;\n\n  public constructor(base: InteractionRoute<TBase>, relativePath: string, ensureSlash = true) {\n    this.base = base;\n    this.relativePath = trimLeadingSlashes(relativePath);\n    if (ensureSlash) {\n      this.relativePath = ensureTrailingSlash(this.relativePath);\n    }\n  }\n\n  public getPath(parameters?: Record<TBase, string>): string {\n    const path = this.base.getPath(parameters);\n    if (!path.endsWith('/')) {\n      throw new InternalServerError(\n        `Expected ${path} to end on a slash so it could be extended. This indicates a configuration error.`,\n      );\n    }\n    return joinUrl(path, this.relativePath);\n  }\n\n  public matchPath(path: string): Record<TBase, string> | undefined {\n    if (!path.endsWith(this.relativePath)) {\n      return;\n    }\n\n    const head = path.slice(0, -this.relativePath.length);\n\n    return this.base.matchPath(head);\n  }\n}\n"]}