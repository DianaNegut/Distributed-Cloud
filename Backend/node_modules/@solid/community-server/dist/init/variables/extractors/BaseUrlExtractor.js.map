{"version":3,"file":"BaseUrlExtractor.js","sourceRoot":"","sources":["../../../../src/init/variables/extractors/BaseUrlExtractor.ts"],"names":[],"mappings":";;;AAAA,qDAA6D;AAE7D,6DAA0D;AAE1D;;;GAGG;AACH,MAAa,gBAAiB,SAAQ,uCAAkB;IACrC,WAAW,CAAS;IAErC,YAAmB,WAAW,GAAG,IAAI;QACnC,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;IACjC,CAAC;IAEM,KAAK,CAAC,MAAM,CAAC,IAAe;QACjC,IAAI,OAAO,IAAI,CAAC,OAAO,KAAK,QAAQ,EAAE,CAAC;YACrC,OAAO,IAAA,8BAAmB,EAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC3C,CAAC;QACD,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,QAAQ,EAAE,CAAC;YACpC,MAAM,IAAI,SAAS,CAAC,qEAAqE,CAAC,CAAC;QAC7F,CAAC;QACD,MAAM,IAAI,GAAI,IAAI,CAAC,IAAe,IAAI,IAAI,CAAC,WAAW,CAAC;QACvD,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,mBAAmB,CAAC,CAAC;QACzC,GAAG,CAAC,IAAI,GAAG,GAAG,IAAI,EAAE,CAAC;QACrB,OAAO,GAAG,CAAC,IAAI,CAAC;IAClB,CAAC;CACF;AApBD,4CAoBC","sourcesContent":["import { ensureTrailingSlash } from '../../../util/PathUtil';\nimport type { Shorthand } from '../Types';\nimport { ShorthandExtractor } from './ShorthandExtractor';\n\n/**\n * A {@link ShorthandExtractor} that that generates the base URL based on the input `baseUrl` value,\n * or by using the port if the first isn't provided.\n */\nexport class BaseUrlExtractor extends ShorthandExtractor {\n  private readonly defaultPort: number;\n\n  public constructor(defaultPort = 3000) {\n    super();\n    this.defaultPort = defaultPort;\n  }\n\n  public async handle(args: Shorthand): Promise<unknown> {\n    if (typeof args.baseUrl === 'string') {\n      return ensureTrailingSlash(args.baseUrl);\n    }\n    if (typeof args.socket === 'string') {\n      throw new TypeError('BaseUrl argument should be provided when using Unix Domain Sockets.');\n    }\n    const port = (args.port as string) ?? this.defaultPort;\n    const url = new URL('http://localhost/');\n    url.port = `${port}`;\n    return url.href;\n  }\n}\n"]}