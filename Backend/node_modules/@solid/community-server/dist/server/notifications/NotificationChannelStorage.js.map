{"version":3,"file":"NotificationChannelStorage.js","sourceRoot":"","sources":["../../../src/server/notifications/NotificationChannelStorage.ts"],"names":[],"mappings":"","sourcesContent":["import type { ResourceIdentifier } from '../../http/representation/ResourceIdentifier';\nimport type { NotificationChannel } from './NotificationChannel';\n\n/**\n * Stores all the information necessary to keep track of notification channels.\n * Besides the standard channel info it also stores features specific to a certain channel type.\n *\n * This storage assumes that a channel can only have a single identifier as its topic.\n */\nexport interface NotificationChannelStorage {\n  /**\n   * Returns the requested channel.\n   * `undefined` if no match was found or if the notification channel expired.\n   *\n   * @param id - The identifier of the notification channel.\n   */\n  get: (id: string) => Promise<NotificationChannel | undefined>;\n\n  /**\n   * Returns the identifiers of all notification channel entries that have the given identifier as their topic.\n   * The identifiers can potentially correspond to expired channels.\n   *\n   * @param topic - The identifier that is the topic.\n   */\n  getAll: (topic: ResourceIdentifier) => Promise<string[]>;\n\n  /**\n   * Adds the given channel to the storage.\n   *\n   * @param channel - Channel to add.\n   */\n  add: (channel: NotificationChannel) => Promise<void>;\n\n  /**\n   * Updates the given notification channel.\n   * The `id` and the `topic` can not be updated.\n   *\n   * @param channel - The channel to update.\n   */\n  update: (channel: NotificationChannel) => Promise<void>;\n\n  /**\n   * Deletes the given notification channel from the storage.\n   * Returns true if the channel existed.\n   *\n   * @param id - The identifier of the notification channel\n   */\n  delete: (id: string) => Promise<boolean>;\n}\n"]}