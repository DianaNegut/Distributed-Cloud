{"version":3,"file":"EjsTemplateEngine.js","sourceRoot":"","sources":["../../../src/util/templates/EjsTemplateEngine.ts"],"names":[],"mappings":";;;AAAA,6BAA6B;AAC7B,iFAA8E;AAE9E,iDAAmE;AAGnE;;GAEG;AACH,MAAa,iBAA2D,SAAQ,2DAA+B;IAC5F,OAAO,CAAS;IAEjC;;;OAGG;IACH,YAAmB,OAAe,EAAE,mBAAmB,GAAG,CAAE,KAAK,CAAE;QACjE,KAAK,CAAC,mBAAmB,CAAC,CAAC;QAC3B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IACzB,CAAC;IAEM,KAAK,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAA0B;QAChE,MAAM,OAAO,GAAG,EAAE,GAAG,QAAQ,EAAE,QAAQ,EAAE,IAAA,kCAAmB,EAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC;QAChG,OAAO,IAAA,YAAM,EAAC,MAAM,IAAA,2BAAY,EAAC,QAAQ,CAAC,EAAE,OAAO,CAAC,CAAC;IACvD,CAAC;CACF;AAhBD,8CAgBC","sourcesContent":["import { render } from 'ejs';\nimport { ExtensionBasedTemplateEngine } from './ExtensionBasedTemplateEngine';\nimport type { TemplateEngineInput } from './TemplateEngine';\nimport { getTemplateFilePath, readTemplate } from './TemplateUtil';\nimport Dict = NodeJS.Dict;\n\n/**\n * Fills in EJS templates.\n */\nexport class EjsTemplateEngine<T extends Dict<unknown> = Dict<unknown>> extends ExtensionBasedTemplateEngine<T> {\n  private readonly baseUrl: string;\n\n  /**\n   * @param baseUrl - Base URL of the server.\n   * @param supportedExtensions - The extensions that are supported by this template engine (defaults to 'ejs').\n   */\n  public constructor(baseUrl: string, supportedExtensions = [ 'ejs' ]) {\n    super(supportedExtensions);\n    this.baseUrl = baseUrl;\n  }\n\n  public async handle({ contents, template }: TemplateEngineInput<T>): Promise<string> {\n    const options = { ...contents, filename: getTemplateFilePath(template), baseUrl: this.baseUrl };\n    return render(await readTemplate(template), options);\n  }\n}\n"]}