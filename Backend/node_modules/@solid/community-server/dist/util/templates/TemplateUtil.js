"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getTemplateFilePath = getTemplateFilePath;
exports.readTemplate = readTemplate;
const node_fs_1 = require("node:fs");
const PathUtil_1 = require("../PathUtil");
/**
 * Returns the absolute path to the template.
 * Returns undefined if the input does not contain a file path.
 */
function getTemplateFilePath(template) {
    // The template has been passed as a filename
    if (typeof template === 'string') {
        return getTemplateFilePath({ templateFile: template });
    }
    // The template has already been given as a string so no known path
    if (!template || 'templateString' in template) {
        return;
    }
    const { templateFile, templatePath } = template;
    const fullTemplatePath = templatePath ? (0, PathUtil_1.joinFilePath)(templatePath, templateFile) : templateFile;
    return (0, PathUtil_1.resolveAssetPath)(fullTemplatePath);
}
/**
 * Reads the template and returns it as a string.
 */
async function readTemplate(template) {
    // The template has already been given as a string
    if (typeof template === 'undefined' || (typeof template === 'object' && 'templateString' in template)) {
        return template?.templateString ?? '';
    }
    // The template needs to be read from disk
    return node_fs_1.promises.readFile(getTemplateFilePath(template), 'utf8');
}
//# sourceMappingURL=TemplateUtil.js.map